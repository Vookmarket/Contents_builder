# Gemini API 利用ガイド

このプロジェクトでは、Google の生成AIモデル「Gemini」を使用しています。
以下に、APIキーの取得方法とモデルの設定について説明します。

## 1. APIキーの取得

1.  [Google AI Studio](https://aistudio.google.com/) にアクセスし、Googleアカウントでログインします。
2.  左上のメニューから **"Get API key"** を選択します。
3.  **"Create API key"** をクリックし、新しいプロジェクトを作成するか既存のプロジェクトを選択してキーを生成します。
4.  生成された API キー（`AIza` から始まる文字列）をコピーします。

## 2. GASへのAPIキー設定

1.  Google Apps Script (GAS) エディタを開きます。
2.  左サイドバーの **プロジェクトの設定**（歯車アイコン）をクリックします。
3.  **スクリプト プロパティ** のセクションまでスクロールします。
4.  **プロパティを追加** をクリックし、以下のように設定します。
    - プロパティ: `GEMINI_API_KEY`
    - 値: (コピーしたAPIキー)
5.  **スクリプト プロパティを保存** をクリックします。

## 3. 利用可能なモデル

本プロジェクトでは以下のモデルを使用する設定になっています。

- **スクリーニング用**: `gemini-3-flash`
    - 特徴: 高速、低コスト。大量のニュース記事の分類・要約に適しています。
- **コンテンツ生成用**: `gemini-3-pro`
    - 特徴: 高性能。複雑な推論や高品質な文章作成に適しています。

※ モデル名は時期によって変更される可能性があります（例: `gemini-1.5-pro` など）。
利用可能な最新モデルは [Gemini Models Documentation](https://ai.google.dev/models/gemini) で確認できます。

### モデル名の変更方法

`src/config/_Config.gs` ファイルを編集することで、使用するモデルを変更できます。

```javascript
  GEMINI: {
    MODEL_SCREENING: 'gemini-3-flash', // ここを変更
    MODEL_GENERATION: 'gemini-3-pro',  // ここを変更
    // ...
  },
```

## 4. トラブルシューティング

- **エラー: 400 Bad Request (User location is not supported ...)**
    - Gemini API がまだ提供されていない地域（EUの一部など）からのアクセスの可能性があります。
- **エラー: 429 Too Many Requests**
    - APIのレート制限（1分あたりのリクエスト数など）を超過しました。しばらく待ってから再実行してください。
    - 無料枠（Free Tier）の場合、制限が厳しいため注意が必要です。
- **レスポンスが空になる**
    - プロンプトの内容が不適切（安全フィルターに引っかかる等）な場合があります。
